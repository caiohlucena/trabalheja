{% extends "base/base.html" %}

{% block content %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<div class="container py-5">
    <div class="row justify-content-center text-center mb-5">
        <div class="col-lg-8">
            <span class="badge bg-gold text-dark px-3 py-2 mb-3">DIAGNÓSTICO CONCLUÍDO</span>
            <h1 class="display-4 fw-black text-uppercase">O Teu DNA <span class="text-gold">Elite</span></h1>
            <p class="lead text-muted">Olá {{ nome }}, o nosso algoritmo mapeou a tua forma de trabalho. Estás agora habilitado para alocações estratégicas na TrabalheJá.</p>
        </div>
    </div>

    <div class="row g-4 align-items-center">
        <div class="col-lg-6">
            <div class="card border-0 shadow-lg p-4" style="border-radius: 20px; background: #fff;">
                <canvas id="radarChart"></canvas>
            </div>
        </div>

        <div class="col-lg-6">
            <div class="ps-lg-5">
                <h2 class="fw-bold mb-4">Como te alocamos?</h2>
                <div class="mb-4">
                    <h5 class="fw-bold"><i class="bi bi-cpu text-gold me-2"></i> Inteligência de Match</h5>
                    <p class="text-muted small">O teu perfil foi cruzado com a nossa base de empresas parceiras. Tu serás priorizado para vagas que exigem o teu equilíbrio específico de competências.</p>
                </div>
                <div class="mb-4">
                    <h5 class="fw-bold"><i class="bi bi-graph-up-arrow text-gold me-2"></i> Próximos Passos</h5>
                    <p class="text-muted small">Irás receber um convite para uma **Sessão de Mentoria Sênior** focada em elevar os teus pontos de menor score, garantindo que te tornes um profissional 360º.</p>
                </div>
                <hr>
                <div class="d-grid">
                    <a href="{% url 'dashboard' %}" class="btn btn-dark btn-lg py-3 rounded-0 shadow">ACESSAR MINHA DASHBOARD ELITE</a>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    const ctx = document.getElementById('radarChart');

    // Pegamos os scores que o Django passou para o context
    const dataScores = [
        {{ scores.e|default:0 }}, // Execução
        {{ scores.a|default:0 }}, // Análise
        {{ scores.i|default:0 }}, // Influência
        {{ scores.v|default:0 }}, // Visão Estratégica
        {{ scores.r|default:100 }}  // Resiliência (ou um 5º eixo à escolha)
    ];

    new Chart(ctx, {
        type: 'radar',
        data: {
            labels: ['Execução', 'Análise Técnica', 'Inteligência Social', 'Visão Estratégica', 'Resiliência'],
            datasets: [{
                label: 'O Teu Perfil',
                data: dataScores,
                fill: true,
                backgroundColor: 'rgba(212, 175, 55, 0.2)',
                borderColor: '#D4AF37',
                pointBackgroundColor: '#D4AF37',
                pointBorderColor: '#fff',
                pointHoverBackgroundColor: '#fff',
                pointHoverBorderColor: '#D4AF37'
            }]
        },
        options: {
            scales: {
                r: {
                    angleLines: { display: true },
                    suggestedMin: 0,
                    suggestedMax: 100,
                    ticks: { display: false }
                }
            },
            plugins: {
                legend: { display: false }
            }
        }
    });
</script>

<style>
    .bg-gold { background-color: #D4AF37; }
    .text-gold { color: #D4AF37; }
    .fw-black { font-weight: 900; }
</style>
{% endblock %}